var Bat=function(t,i,s){this.upx=t,this.$el=s,this.ctx=i,this.speed=10;var h=this;1==this.upx&&window.addEventListener("mousemove",function(t){var i=t.clientY-h.height/2;h.speed=h.y-i,h.y=i},!1)};Bat.prototype.width=40,Bat.prototype.height=130,Bat.prototype.ability=4,Bat.prototype.draw=function(){this.y=this.y||this.$el.height/2-this.height/2;var t=50;this.x=1==this.upx?this.width+t:this.$el.width-2*this.width-t,2==this.upx&&(Math.abs(this.y-this.ball.y)<this.ability?this.y=this.ball.y:this.y<this.ball.y?this.y+=this.ability:this.y-=this.ability),this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(this.x,this.y,this.width,this.height)},Bat.prototype.intersects=function(t,i,s,h,e,n,a,o){return!(a!==Infinity&&s!==Infinity&&(a+=e,s+=t,isNaN(s)||isNaN(a)||s<e||a<t))&&!(n!==Infinity&&h!==Infinity&&(o+=n,h+=i,isNaN(h)||isNaN(n)||h<n||o<i))},Bat.prototype.hit=function(t){return!!this.intersects(this.x,this.y,this.width,this.height,t.x,t.y,t.size,t.size)&&this.speed};var Ball=function(t,i,s,h,e){this.up1=s,this.up2=h,this.img=e,this.$el=i,this.Xspeed=5,this.Yspeed=-5,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.ctx=t};Ball.prototype.size=70,Ball.prototype.reverse=function(t){this[t]=this[t]-2*this[t]},Ball.prototype.score=function(t){var i=$(t),s=parseFloat(i.html());i.html(++s)},Ball.prototype.bounds=function(){(this.x<=0||this.x>=this.$el.width-this.size)&&this.reverse("Xspeed"),(this.y<=0||this.y>=this.$el.height-this.size)&&this.reverse("Yspeed"),this.x>=this.$el.width-this.size&&this.score("#js-up1"),this.x<=0&&this.score("#js-up2")},Ball.prototype.adjust=function(t){return this.x<t.x+t.width/2?t.x-(this.size+1):t.x+t.width+1},Ball.prototype.draw=function(){this.bounds();var t=this.up1.hit(this),i=this.up2.hit(this);(t||i)&&(this.reverse("Xspeed"),this.Yspeed=t||i),t&&(this.x=this.adjust(this.up1)),i&&(this.x=this.adjust(this.up2)),this.ctx.drawImage(this.img,this.x,this.y),this.x+=this.Xspeed,this.y+=this.Yspeed};var pong=new Vue({el:"#js-pong",data:{},mounted:function(){this.canvas=document.getElementById("js-pong-canvas"),this.ctx=this.canvas.getContext("2d"),this.up1=new Bat(1,this.ctx,this.canvas),this.up2=new Bat(2,this.ctx,this.canvas),this.heart=new Image;var t=this;this.heart.onload=function(){t.ball=new Ball(t.ctx,t.canvas,t.up1,t.up2,t.heart),t.up2.ball=t.ball,t.draw()},this.heart.src="/assets/img/heart.png"},methods:{resize:function(){this.canvas.width=document.documentElement.clientWidth,this.canvas.height=document.documentElement.clientHeight},draw:function(){this.resize(),this.up1.draw(),this.up2.draw(),this.ball.draw(),this.tick()},tick:function(){var t=this;setTimeout(function(){t.draw()},10)}}});